# 📄 로또 서비스 요구사항 정의서

---

## 1. 개요

| 항목 | 내용 |
|------|------|
| 문서명 | 로또 서비스 요구사항 정의서  
| 작성일 | 2025-04-10  
| 작성자 | 이경원
| 문서 목적 | 본 문서는 로또 번호 추천/입력/조회/당첨 확인 기능에 대한 사용자 중심의 요구사항을 정의한다.  
| 대상 독자 | 기획자, 디자이너, 개발자, QA  

---

## 2. 서비스 개요

- 소셜 로그인 기반(카카오, 구글, 네이버) 로또 번호 추천/저장/확인 서비스
- 사용자는 추천 번호 또는 본인이 구매한 번호를 등록하고, 당첨 여부를 확인할 수 있음
- 광고 시청 기반 추가 추천, 당첨 알림 기능도 포함

---

## 3. 기능 요구사항

---

### 2-1. 로또 번호 추천 (회원 / 비회원)

- 사용자는 로그인 여부와 관계없이 로또 번호 5세트를 추천 받을 수 있다.
- 각 세트는 6개의 중복되지 않은 숫자로 구성된다.
- 기본 1일 5번까지 추천 받을 수 있으며, 광고를 시청하면 5회 추가 횟수를 얻는다.
- 하나의 로또 회차(일주일)당 추천 가능한 번호 세트는 최대 30개로 제한된다.

---

### 2-2. 구매한 로또 번호 입력 (회원 전용)

- 회원은 구매한 로또 번호를 **수동 입력** 또는 **QR 코드 스캔** 방식으로 저장할 수 있다.
- 수동 입력 시, 숫자 개수(6개), 범위(1~45), 중복 여부를 검증한다.
- 입력한 번호가 기존에 추천 받은 번호와 동일할 경우, 새로운 데이터를 저장하지 않고 해당 기록의 `isPurchased` 필드만 `true`로 변경한다.

---

### 2-3. 회원 로또 번호 내역 조회 (회원 전용)

- 회원은 자신이 추천받거나 구매한 모든 로또 번호 내역을 조회할 수 있다.
- 기본적으로 최신 회차의 로또 번호 10개씩 페이징하여 제공된다.
- 지난 회차에 대해 당첨 여부가 있는 추천/구매 번호도 함께 확인할 수 있다.

---

### 2-4. 로또 번호 삭제 (회원 전용)

- 회원은 자신이 **직접 구매하여 등록한 로또 번호**(`isPurchased = true`)를 삭제할 수 있다.
- 추천 받은 번호만 존재하는 경우(`isPurchased = false`)는 삭제할 수 없다.

---

### 2-5. 로또 당첨 내역 확인 (회원 전용)

- 회원은 추천받거나 구매한 번호 중에서 실제 당첨된 번호가 있는지 확인할 수 있다.
- 확인 대상은 지정된 로또 회차 기준으로 비교된다.

---

### 2-6. 당첨 결과 확인 (회원 / 비회원 공통)

- 사용자는 QR 코드 또는 수동으로 입력한 번호를 통해 특정 회차의 당첨 결과를 확인할 수 있다.
- 수동 입력 시에는 회차 번호와 로또 번호 6개를 정확히 입력해야 한다.

---

### 2-7. 로또 당첨 알림 (회원 전용)

- 회원이 카카오 메시지 수신 또는 휴대폰 번호 등록 및 문자 수신 동의한 경우,
- 해당 회원이 추천받거나 구매한 번호가 당첨될 경우 **로또 발표 직후 알림을 전송**한다.

---

## 4. 데이터 구조 정의

---

### 📌 추천/구매 로또 기록 (LottoHistory)

| 필드명 | 타입 | 설명 |
|--------|------|------|
| id | Long | PK  
| memberId | Long | 회원 ID (FK)  
| numbers | List<Integer> | 6개의 로또 번호  
| round | int | 회차 번호  
| recommendedAt | LocalDateTime | 추천 또는 입력 시각  
| isManual | boolean | 수동 입력 여부  
| isPurchased | boolean | 구매 여부  
| source | String | 추천 방식 (기본, 통계 기반 등)

---

### 📌 로또 당첨 내역 (LottoWinning)

| 필드명 | 타입 | 설명 |
|--------|------|------|
| id | Long | PK  
| memberId | Long | 회원 ID  
| round | int | 회차 번호  
| winnerNums | List<Integer> | 당첨된 번호  
| rank | int | 당첨 순위 (1~5등)

---

### 📌 회차별 공식 로또 결과 (LottoResult)

| 필드명 | 타입 | 설명 |
|--------|------|------|
| round | int | 회차 번호  
| winnerData | List<Integer> | 공식 당첨 번호 (6개)  
| bonusNum | int | 보너스 번호  
| rank | int | 순위 구분  
| totalWinners | int | 전체 당첨자 수  
| prizePerPerson | Long | 1인당 당첨 금액  

---

## 5. 향후 기능 확장 (예정)

- 연금복권 추천 및 저장 기능
- 번호 분석 및 통계 기반 추천
- 마이페이지 및 추천 통계 차트
- 어드민 관리 페이지

---
